version: "3.9"

services:
  n8n:
    image: n8nio/n8n:latest
    container_name: n8n
    restart: unless-stopped
    ports:
      - "5678:5678"
    environment:
      # 🔒 Criptografia de credenciais
      #- N8N_ENCRYPTION_KEY=be69f016-d47e-4dd9-99e8-2344ca477f2d

      # 🚪 Desliga o cadastro/login (sem tela de setup)
      - N8N_USER_MANAGEMENT_DISABLED=true

      # 🌐 URL do editor (ajuste se publicar atrás de proxy)
      - N8N_EDITOR_BASE_URL=http://localhost:5678
      - WEBHOOK_URL=http://localhost:5678

      # 🕒 Fuso
      - GENERIC_TIMEZONE=America/Fortaleza

      # 📉 Desliga telemetria/notificações (opcional)
      - N8N_DIAGNOSTICS_ENABLED=false
      - N8N_VERSION_NOTIFICATIONS_ENABLED=false

      # ⚙️ Evita cookies “secure” se não estiver em HTTPS
      - N8N_SECURE_COOKIE=false

    volumes:
      - ./n8n_data:/home/node/.n8n
